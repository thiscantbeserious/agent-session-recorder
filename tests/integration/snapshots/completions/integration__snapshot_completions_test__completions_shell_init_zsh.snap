---
source: tests/integration/snapshot_completions_test.rs
expression: output
---
=== agr completions --shell-init zsh ===
Exit code: 0

--- stdout ---
_agr_commands=('record:Start recording a session' 'status:Show storage statistics' 'cleanup:Interactive cleanup of old sessions' 'list:List recorded sessions' 'analyze:Analyze a recording with AI' 'play:Play a recording with the native player' 'marker:Manage markers in cast files' 'agents:Manage configured agents' 'config:Configuration management' 'shell:Manage shell integration' 'optimize:Optimize asciicast recordings (removes silence)');_agr_file_cmds="analyze play optimize";_agr_marker_subcmds=('add:Add a marker to a cast file at a specific timestamp' 'list:List all markers in a cast file');_agr_agents_subcmds=('list:List all configured agents' 'add:Add an agent to the configuration' 'remove:Remove an agent from the configuration' 'is-wrapped:Check if an agent should be wrapped (used by shell integration)' 'no-wrap:Manage agents that should not be auto-wrapped');_agr_config_subcmds=('show:Show current configuration as TOML' 'edit:Open configuration file in your default editor' 'migrate:Add missing fields to config file');_agr_shell_subcmds=('status:Show shell integration status' 'install:Install shell integration to .zshrc/.bashrc' 'uninstall:Remove shell integration from .zshrc/.bashrc');if [[ -n "$ZSH_VERSION" ]]; then zstyle ':completion:*:*:agr:*' menu select;zstyle ':completion:*:*:agr:*' format '%F{8}-- %d --%f';_agr_complete_files() { local cur="$1";local -a files;files=(${(f)"$(agr completions --files --limit 20 "$cur" 2>/dev/null)"});(( $#files ))&&_describe 'recordings' files;};_agr_complete() { local cur="${words[CURRENT]}";local cmd="${words[2]}";local subcmd="${words[3]}";if (( CURRENT == 2 )); then _describe 'commands' _agr_commands;elif (( CURRENT == 3 )); then case "$cmd" in marker) _describe 'subcommands' _agr_marker_subcmds ;;agents) _describe 'subcommands' _agr_agents_subcmds ;;config) _describe 'subcommands' _agr_config_subcmds ;;shell) _describe 'subcommands' _agr_shell_subcmds ;;*) [[ " $_agr_file_cmds " =~ " $cmd " ]] &&_agr_complete_files "$cur" ; esac;elif (( CURRENT>= 4 )); then if [[ "$cmd" == "marker" ]]; then _agr_complete_files "$cur";fi;fi;};compdef _agr_complete agr;fi

--- stderr ---
