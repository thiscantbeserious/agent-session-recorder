<!-- This file is auto-generated by `cargo xtask gen-docs`. Do not edit manually. -->

# Configuration

AGR uses a TOML configuration file at `~/.config/agr/config.toml`.

## Quick Commands

```bash
agr config show      # View current configuration
agr config edit      # Open in your editor
agr config migrate   # Migrate to latest schema
```

## Configuration Sections

### [shell]

Shell integration settings

| Option | Default | Description |
|--------|---------|-------------|
| `auto_wrap` | `true` | Automatically wrap agent commands for recording |

### [storage]

Storage and cleanup settings

| Option | Default | Description |
|--------|---------|-------------|
| `directory` | `~/recorded_agent_sessions` | Base directory for session recordings |
| `size_threshold_gb` | `5.0` | Storage warning threshold in GB |
| `age_threshold_days` | `30` | Age threshold in days for cleanup suggestions |

### [recording]

Recording behavior settings

| Option | Default | Description |
|--------|---------|-------------|
| `auto_analyze` | `false` | Automatically run AI analysis after recording ends |
| `filename_template` | `{directory}_{date}_{time}` | Filename template using {directory}, {date}, {time} tags |
| `directory_max_length` | `14` | Maximum characters for directory component in filename |

### [analysis]

AI analysis settings

| Option | Default | Description |
|--------|---------|-------------|
| `agent` | `auto-detect` | Preferred agent for analysis (claude, codex, gemini) |
| `workers` | `auto` | Number of parallel analysis workers (auto-scale if unset) |
| `timeout` | `120` | Timeout per analysis chunk in seconds |
| `fast` | `false` | Fast mode: skip JSON schema enforcement |
| `curate` | `true` | Auto-curate markers when count exceeds threshold |

### [agents]

Agent configuration

| Option | Default | Description |
|--------|---------|-------------|
| `enabled` | `["claude", "codex", "gemini"]` | List of agents to auto-wrap |
| `no_wrap` | `[]` | Agents to exclude from auto-wrapping |

### [agents.\<name\>]

Per-agent analysis configuration. Applies to `[agents.claude]`, `[agents.codex]`, `[agents.gemini]`.

| Option | Default | Description |
|--------|---------|-------------|
| `extra_args` | `[]` | Default extra CLI arguments for all tasks |
| `analyze_extra_args` | `[]` | Extra CLI arguments for analysis (overrides extra_args) |
| `curate_extra_args` | `[]` | Extra CLI arguments for curation (overrides extra_args) |
| `rename_extra_args` | `[]` | Extra CLI arguments for rename (overrides extra_args) |
| `token_budget` | `auto` | Override the token budget for this agent |

## Filename Templates

Customize how recording filenames are generated using template tags.

### Available Tags

| Tag | Description | Example Output |
|-----|-------------|----------------|
| `{directory}` | Current working directory name | `my-project` |
| `{date}` | Date in YYMMDD format | `260129` |
| `{date:FORMAT}` | Date with custom strftime | `{date:%Y-%m-%d}` → `2026-01-29` |
| `{time}` | Time in HHMM format | `1430` |
| `{time:FORMAT}` | Time with custom strftime | `{time:%H:%M}` → `14:30` |

### Example Templates

```toml
[recording]
# Default: project_260129_1430.cast
filename_template = "{directory}_{date}_{time}"

# ISO date: project_2026-01-29.cast
filename_template = "{directory}_{date:%Y-%m-%d}"

# Simple timestamp: 260129-143022.cast
filename_template = "{date:%y%m%d}-{time:%H%M%S}"
```

### Sanitization

Directory names are automatically sanitized:
- Spaces → hyphens
- Invalid characters removed (`/\:*?"<>|`)
- Unicode → ASCII transliteration
- Truncated to `directory_max_length`
- Windows reserved names handled (CON, NUL, etc.)

## Example Configuration

```toml
[shell]
auto_wrap = true

[storage]
directory = "~/recorded_agent_sessions"
size_threshold_gb = 10.0
age_threshold_days = 14

[recording]
auto_analyze = false
filename_template = "{directory}_{date:%Y%m%d}_{time:%H%M}"
directory_max_length = 40

[analysis]
agent = "claude"
timeout = 120

[agents]
enabled = ["claude", "codex", "gemini"]
no_wrap = ["gemini"]

[agents.codex]
extra_args = ["--model", "o3"]
```
