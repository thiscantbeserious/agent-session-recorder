# Coverage configuration for cargo-tarpaulin
# Run: cargo tarpaulin

[default]
# Fail if coverage drops below threshold
fail-under = 70.0

# Exclude files from coverage calculation
# - tests/*: Test files themselves
# - */tests.rs: Inline test modules
# - src/tui/*: TUI code requires terminal, tested via e2e/manual
# - src/player/native.rs, src/player/asciinema.rs: Players require terminal, tested via e2e/manual
# - src/main.rs: CLI entry point, tested via e2e
# - src/recording.rs: Requires asciinema, tested via e2e
# - src/commands/list.rs, src/commands/cleanup.rs: Launch TUI, tested via e2e/manual
exclude-files = ["tests/*", "*/tests.rs", "src/tui/*", "src/player/native.rs", "src/player/asciinema.rs", "src/main.rs", "src/recording.rs", "src/commands/list.rs", "src/commands/cleanup.rs"]

# Skip functions that are hard to test
ignore = [
    # Main entry points (tested via e2e)
    "main",
    # CLI parsing (tested via integration tests)
    "build_cli",
    # TUI functions (require terminal, tested manually)
    "show_tui_help",
    "should_show_tui_help",
]

[report]
# Output formats
out = ["Xml", "Html"]
output-dir = "coverage"
