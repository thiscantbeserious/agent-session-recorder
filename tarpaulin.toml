# Coverage configuration for cargo-tarpaulin
# Run: cargo tarpaulin

[report]
# Fail if coverage drops below threshold
# NOTE: Starting threshold set to 40% based on current coverage (~43%).
# This is a baseline to prevent regression. Improve coverage incrementally:
# - src/main.rs (4%) and src/recording.rs (14%) are lowest priority (tested via e2e)
# - src/analyzer.rs (48%), src/shell.rs (51%), src/config.rs (68%) are good targets
# - src/asciicast.rs (88%), src/markers.rs (95%), src/storage.rs (89%) are well covered
fail-under = 40.0

[run]
# Exclude test files from coverage calculation
exclude-files = ["tests/*", "*/tests.rs"]

# Output formats
out = ["Xml", "Html"]
output-dir = "coverage"

# Skip functions that are hard to test
ignore = [
    # Main entry points (tested via e2e)
    "main",
    # CLI parsing (tested via integration tests)
    "build_cli",
]
